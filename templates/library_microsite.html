{% extends "base_public.html" %}
{% block title %}{{ library.name }} - Kaluwala Libraries{% endblock %}
{% block extra_css %}
<style>
.library-hero{background:linear-gradient(135deg,{{ library.primary_color or '#2d5016' }}dd,{{ library.secondary_color or '#4a7c2c' }}dd),url('/{{ library.cover_image or "static/images/library-hero.jpg" }}');background-size:cover;background-position:center;color:#fff;padding:100px 20px;text-align:center}.library-title{font-size:3rem;font-weight:700;margin-bottom:15px;text-shadow:2px 2px 4px rgba(0,0,0,.3)}@media(max-width:768px){.library-title{font-size:2rem}}.library-tagline{font-size:1.2rem;opacity:.95;margin-bottom:30px}.library-actions{display:flex;gap:15px;justify-content:center;flex-wrap:wrap}.action-btn{padding:15px 30px;border-radius:8px;font-weight:600;font-size:1.1rem;border:none;cursor:pointer;transition:all .3s}.btn-primary-custom{background:#fff;color:{{ library.primary_color or '#2d5016' }}}.btn-primary-custom:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(255,255,255,.3)}.btn-secondary-custom{background:transparent;color:#fff;border:2px solid #fff}.btn-secondary-custom:hover{background:#fff;color:{{ library.primary_color or '#2d5016' }}}.info-section{padding:60px 20px;background:#fff}.info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px;margin-top:30px}.info-card{background:#f9fafb;padding:30px;border-radius:15px;border-left:4px solid {{ library.primary_color or '#4a7c2c' }}}.info-icon{font-size:2.5rem;margin-bottom:15px}.info-title{font-size:1.3rem;font-weight:700;color:{{ library.primary_color or '#2d5016' }};margin-bottom:10px}.info-text{color:#666;line-height:1.6}.gallery-preview{padding:60px 20px;background:#f5f7fa}.section-title{font-size:2.5rem;font-weight:700;color:{{ library.primary_color or '#2d5016' }};margin-bottom:30px;text-align:center}.gallery-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;margin-top:30px}.gallery-item{height:200px;background-size:cover;background-position:center;border-radius:10px;cursor:pointer;transition:all .3s;position:relative;overflow:hidden}.gallery-item:hover{transform:scale(1.05)}.gallery-overlay{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(transparent,rgba(0,0,0,.7));padding:20px;color:#fff;transform:translateY(100%);transition:transform .3s}.gallery-item:hover .gallery-overlay{transform:translateY(0)}.contact-section{padding:60px 20px;background:#fff}.contact-grid{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-top:30px}@media(max-width:768px){.contact-grid{grid-template-columns:1fr}}.contact-info{background:#f9fafb;padding:30px;border-radius:15px}.contact-item{display:flex;align-items:start;gap:15px;margin:20px 0}.contact-icon{font-size:1.5rem;color:{{ library.primary_color or '#4a7c2c' }};min-width:30px}.map-container{border-radius:15px;overflow:hidden;height:400px}
</style>
{% endblock %}
{% block content %}
<!-- Library Hero -->
<div class="library-hero">
<h1 class="library-title">{{ library.name }}</h1>
<p class="library-tagline">{{ library.city }}, {{ library.state }}</p>
<div class="library-actions">
<button class="action-btn btn-primary-custom" onclick="window.location.href='/login?library={{ library.slug }}'">
üìö Book a Seat Now
</button>
<button class="action-btn btn-secondary-custom" onclick="scrollToSection('info')">
‚ÑπÔ∏è Learn More
</button>
</div>
</div>

<!-- Library Info -->
<div class="info-section" id="info">
<div class="container">
<h2 class="section-title">Library Information</h2>
<div class="info-grid">
<div class="info-card">
<div class="info-icon">üïê</div>
<h3 class="info-title">Opening Hours</h3>
<p class="info-text">
<strong>Daily:</strong><br>
{{ library.settings.opening_time.strftime('%I:%M %p') }} - {{ library.settings.closing_time.strftime('%I:%M %p') }}
</p>
</div>
<div class="info-card">
<div class="info-icon">üí∫</div>
<h3 class="info-title">Seating Capacity</h3>
<p class="info-text">
<strong>{{ library.total_seats }}</strong> reading seats<br>
General, Researcher & Staff categories
</p>
</div>
<div class="info-card">
<div class="info-icon">üìö</div>
<h3 class="info-title">Collections</h3>
<p class="info-text">
Extensive collection of books, journals, magazines, and digital resources for students and researchers
</p>
</div>
<div class="info-card">
<div class="info-icon">üì±</div>
<h3 class="info-title">Online Booking</h3>
<p class="info-text">
Reserve your seat online in advance. {{ library.settings.slot_duration }} minute time slots available
</p>
</div>
<div class="info-card">
<div class="info-icon">üìç</div>
<h3 class="info-title">Location</h3>
<p class="info-text">
{{ library.address }}<br>
{{ library.city }}, {{ library.state }} {{ library.pincode }}
</p>
</div>
<div class="info-card">
<div class="info-icon">üìû</div>
<h3 class="info-title">Contact</h3>
<p class="info-text">
Email: {{ library.email or 'library@kaluwala.com' }}<br>
Phone: {{ library.phone or '+91 1234567890' }}
</p>
</div>
</div>
</div>
</div>

<!-- Gallery Preview -->
{% if gallery_images %}
<div class="gallery-preview">
<div class="container">
<h2 class="section-title">Photo Gallery</h2>
<div class="gallery-grid">
{% for image in gallery_images[:6] %}
<div class="gallery-item" style="background-image:url('/{{ image.file_path }}')" onclick="window.location.href='/gallery?library={{ library.id }}'">
<div class="gallery-overlay">
<p>{{ image.caption }}</p>
</div>
</div>
{% endfor %}
</div>
{% if gallery_images|length > 6 %}
<div style="text-align:center;margin-top:30px">
<button class="action-btn btn-primary-custom" onclick="window.location.href='/gallery?library={{ library.id }}'">
View All Photos ({{ gallery_images|length }})
</button>
</div>
{% endif %}
</div>
</div>
{% endif %}

<!-- Contact & Map -->
<div class="contact-section" id="contact">
<div class="container">
<h2 class="section-title">Visit Us</h2>
<div class="contact-grid">
<div class="contact-info">
<h3 style="color:{{ library.primary_color or '#2d5016' }};margin-bottom:20px">Get in Touch</h3>
<div class="contact-item">
<div class="contact-icon">üìç</div>
<div>
<strong>Address</strong><br>
{{ library.address }}<br>
{{ library.city }}, {{ library.state }} {{ library.pincode }}
</div>
</div>
<div class="contact-item">
<div class="contact-icon">üìß</div>
<div>
<strong>Email</strong><br>
{{ library.email or 'info@kaluwala.com' }}
</div>
</div>
<div class="contact-item">
<div class="contact-icon">üìû</div>
<div>
<strong>Phone</strong><br>
{{ library.phone or '+91 1234567890' }}
</div>
</div>
<div class="contact-item">
<div class="contact-icon">üïê</div>
<div>
<strong>Hours</strong><br>
{{ library.settings.opening_time.strftime('%I:%M %p') }} - {{ library.settings.closing_time.strftime('%I:%M %p') }}
</div>
</div>
<div style="margin-top:30px">
<button class="action-btn btn-primary-custom" style="width:100%" onclick="window.location.href='/login?library={{ library.slug }}'">
Book Your Seat Now
</button>
</div>
</div>
<div class="map-container">
<iframe 
    width="100%" 
    height="400" 
    frameborder="0" 
    style="border:0" 
    src="https://www.openstreetmap.org/export/embed.html?bbox={{ library.longitude or 77.0 }},{{ library.latitude or 28.7 }}&layer=mapnik&marker={{ library.latitude or 28.7 }},{{ library.longitude or 77.0 }}" 
    allowfullscreen>
</iframe>
</div>
</div>
</div>
</div>

<script>
function scrollToSection(id) {
    document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
}
</script>
{% endblock %}
