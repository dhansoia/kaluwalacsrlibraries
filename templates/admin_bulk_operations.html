{% extends "base.html" %}
{% block title %}Bulk Operations - {{ library.name }}{% endblock %}
{% block extra_css %}
<style>
.bulk-container{max-width:1200px;margin:0 auto;padding:20px}.page-header{background:#fff;padding:30px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,.1);margin-bottom:30px}.page-title{color:#2d5016;font-size:2rem;font-weight:700;margin-bottom:10px}.section{background:#fff;padding:25px;border-radius:12px;margin-bottom:25px;box-shadow:0 2px 10px rgba(0,0,0,.08)}.section h2{color:#2d5016;font-size:1.4rem;margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid #e5e7eb}.form-group{margin-bottom:20px}.form-label{display:block;font-weight:600;color:#333;margin-bottom:8px;font-size:.95rem}input[type=text],input[type=number],select{width:100%;padding:12px;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem}input:focus,select:focus{outline:none;border-color:#4a7c2c}.btn{padding:12px 24px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s;font-size:1rem}.btn-primary{background:#4a7c2c;color:#fff}.btn-primary:hover{background:#2d5016;transform:translateY(-2px)}.btn-danger{background:#ef4444;color:#fff}.btn-danger:hover{background:#dc2626}.btn-secondary{background:#6b7280;color:#fff;text-decoration:none;display:inline-block}.btn-secondary:hover{background:#4b5563}.danger-zone{border:2px solid #ef4444;background:#fef2f2}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:25px}.stat-box{background:#f9fafb;padding:20px;border-radius:10px;text-align:center;border-left:4px solid #4a7c2c}.stat-value{font-size:2rem;font-weight:700;color:#2d5016}.stat-label{color:#666;font-size:.9rem;margin-top:5px}
</style>
{% endblock %}
{% block content %}
<div class="bulk-container">
<a href="{{ url_for('admin.dashboard', slug=library.slug) }}" class="btn btn-secondary" style="margin-bottom:20px">â† Back to Dashboard</a>

<div class="page-header">
<h1 class="page-title">âš¡ Bulk Operations</h1>
<p style="color:#666">Manage multiple seats and bookings efficiently</p>
</div>

<!-- Statistics -->
{% if stats %}
<div class="stats-grid">
<div class="stat-box">
<div class="stat-value">{{ stats.total_seats }}</div>
<div class="stat-label">Total Seats</div>
</div>
<div class="stat-box">
<div class="stat-value">{{ stats.general_seats }}</div>
<div class="stat-label">General Seats</div>
</div>
<div class="stat-box">
<div class="stat-value">{{ stats.researcher_seats }}</div>
<div class="stat-label">Researcher Seats</div>
</div>
<div class="stat-box">
<div class="stat-value">{{ stats.staff_seats }}</div>
<div class="stat-label">Staff Seats</div>
</div>
<div class="stat-box">
<div class="stat-value">{{ stats.maintenance_seats }}</div>
<div class="stat-label">In Maintenance</div>
</div>
</div>
{% endif %}

<!-- Bulk Create Seats -->
<div class="section">
<h2>â• Bulk Create Seats</h2>
<p style="color:#666;margin-bottom:20px">Create multiple seats in one go (e.g., seats 1-50)</p>
<form method="POST" action="{{ url_for('admin.bulk_create_seats', slug=library.slug) }}">
<div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:15px">
<div class="form-group">
<label class="form-label">Start Number</label>
<input type="number" name="start_number" min="1" max="9999" required placeholder="1">
</div>
<div class="form-group">
<label class="form-label">End Number</label>
<input type="number" name="end_number" min="1" max="9999" required placeholder="50">
</div>
<div class="form-group">
<label class="form-label">Category</label>
<select name="category">
<option value="general">ğŸŸ¢ General</option>
<option value="researcher">ğŸŸ£ Researcher</option>
<option value="staff">ğŸ”´ Staff</option>
</select>
</div>
</div>
<button type="submit" class="btn btn-primary">Create Seats</button>
</form>
</div>

<!-- Bulk Update Category -->
<div class="section">
<h2>ğŸ·ï¸ Bulk Update Category</h2>
<p style="color:#666;margin-bottom:20px">Change category for multiple seats at once</p>
<form method="POST" action="{{ url_for('admin.bulk_update_category', slug=library.slug) }}">
<div class="form-group">
<label class="form-label">Seat Numbers (comma-separated)</label>
<input type="text" name="seat_numbers" placeholder="1,2,3,4,5 or 10-20" required>
<small style="color:#666">Examples: "1,2,3" or "10,15,20,25"</small>
</div>
<div class="form-group">
<label class="form-label">New Category</label>
<select name="category">
<option value="general">ğŸŸ¢ General</option>
<option value="researcher">ğŸŸ£ Researcher</option>
<option value="staff">ğŸ”´ Staff</option>
</select>
</div>
<button type="submit" class="btn btn-primary">Update Category</button>
</form>
</div>

<!-- Bulk Maintenance Toggle -->
<div class="section">
<h2>ğŸ”§ Bulk Maintenance Mode</h2>
<p style="color:#666;margin-bottom:20px">Enable or disable maintenance for multiple seats</p>
<form method="POST" action="{{ url_for('admin.bulk_toggle_maintenance', slug=library.slug) }}">
<div class="form-group">
<label class="form-label">Seat Numbers (comma-separated)</label>
<input type="text" name="seat_numbers" placeholder="1,2,3,4,5" required>
</div>
<div class="form-group">
<label class="form-label">Maintenance Status</label>
<select name="maintenance">
<option value="true">ğŸ”§ Enable Maintenance</option>
<option value="false">âœ… Disable Maintenance</option>
</select>
</div>
<button type="submit" class="btn btn-primary">Update Status</button>
</form>
</div>

<!-- Bulk Cancel Bookings -->
<div class="section danger-zone">
<h2 style="color:#991b1b">âš ï¸ Bulk Cancel Bookings</h2>
<p style="color:#991b1b;margin-bottom:20px">Cancel all bookings for a specific date (e.g., library holiday). Users will receive email notifications.</p>
<form method="POST" action="{{ url_for('admin.bulk_cancel_bookings', slug=library.slug) }}" 
      onsubmit="return confirm('âš ï¸ WARNING: This will cancel ALL bookings for the selected date and send emails to all users. Are you absolutely sure?')">
<div class="form-group">
<label class="form-label">Date to Cancel</label>
<input type="date" name="date" required min="{{ today }}">
</div>
<div class="form-group">
<label class="form-label">Reason (optional - will be in email)</label>
<input type="text" name="reason" placeholder="Library closed for holiday">
</div>
<button type="submit" class="btn btn-danger">âš ï¸ Cancel All Bookings for Date</button>
</form>
</div>

</div>
{% endblock %}
